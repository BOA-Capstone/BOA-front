# boa-fe 프로젝트 개요

## 3줄 요약

**AI를 이용해 전기차 충전 요금을 아껴주는** 스마트 스케줄링 시스템을 개발합니다. 사용자가 차를 연결하면 **AI가 가장 저렴한 시간대를 알아서 찾아** 충전 계획(충전소의 충전기의 충전 로직 최적화)을 짜주고, 관리자는 모든 상황을 대시보드에서 한눈에 볼 수 있습니다.

## 1. 시스템 개요

본 시스템은 전기차 충전 수요 예측과 지능형 스케줄링 최적화 두 가지 핵심 AI 기능을 결합하여, 태양광 발전과 ESS(에너지 저장 시스템)를 연계한 운영 비용 최소화 및 운영 효율 극대화를 목표로 합니다. 전체 아키텍처는 백엔드 서버, 예측 AI 서버, 최적화 AI 서버, 프론트엔드로 분리되어 있으며, 유연한 확장과 유지보수를 고려한 모듈화 설계가 특징입니다.

---

## 2. 아키텍처 구성

## 2.1. 백엔드 서버

- **역할**: 데이터 수집·관리, AI 서버 간 워크플로우 오케스트레이션, API 게이트웨이
- **주요 컴포넌트**
    - PostgreSQL: 원시(raw) 데이터·전처리 데이터 저장
    - Redis: 예측 결과·스케줄링 액션 캐싱
    - RabbitMQ: 예측→최적화→실행 메시지 큐
    - FastAPI: 클라이언트 요청 처리 및 AI 서버 호출
    - Prometheus & Grafana: 시스템 모니터링 및 대시보드(이건 안 쓸 수 있음)

## 2.2. 예측 AI 서버 (Demand & Solar Forecasting)

- **역할**: 충전 수요와 태양광 발전량 예측 모델 제공
- **데이터**
    1. ACN-Data, Mendeley EV 충전 이력(200~300일)
    2. Stanford SKIPP’D 태양광 데이터(1년치)
    3. 기상청 예보 API(7일 예보)
    4. 서울시 1~8월 충전·일사량 실측 데이터
- **모델**
    - 수요 예측: Temporal Fusion Transformer (TFT)
    - 발전량 예측: LSTM 또는 Prophet
- **학습 파이프라인**
    1. 사전 학습: 해외 공개 데이터로 기본 패턴 학습
    2. 파인튜닝: 서울시 데이터로 특성 적응
    3. 배포: FastAPI REST 엔드포인트로 실시간 예측 제공
- **예측 주기**: 15분 또는 1시간 단위

## 2.3. 최적화 AI 서버 (Scheduling & Control)

- **역할**: 강화학습 기반 충전 스케줄 및 ESS 운영 정책 생성
- **데이터**
    1. 강화학습 시뮬레이션용 충전 수요·발전 예측값
    2. NASA/Nature 배터리 사이클링 데이터
    3. 한전 TOU 요금표
    4. 서울시 60일치 충전·발전 실측 데이터(파인튜닝용)
- **모델**
    - 주 에이전트: PPO (Proximal Policy Optimization)
    - 보조 에이전트: DQN (충전 On/Off 결정용)
- **환경 설계**
    - 상태(State): 시간대, 예측 수요·발전량, ESS SOC, 그리드 잔여 용량
    - 행동(Action): 충전기별 속도 비율, ESS 충방전 전력량
    - 보상(Reward): 전력 구매비용 음수화 + 사용자 만족도 보너스 – ESS 사이클 페널티
- **학습 파이프라인**
    1. 사전 학습: 해외 데이터 기반 시뮬레이터로 10,000 에피소드 학습
    2. 파인튜닝: 서울시 실측 데이터로 1,000 에피소드 재학습
    3. 검증: 양재 솔라스테이션 데이터로 테스트만 수행
- **실행 주기**: 매 15분마다 액션 제안

---

## 2.4. 프론트엔드 (MVP 기준)

- **역할**: 관리자/사용자 입력(차량, SoC, 시간 등) 수집, AI가 산출한 예상 충전 비용·스케줄·Baseline 비교 결과를 직관적으로 표시, Baseline보다 AI가 비싸면 기존 방식 안내만 제공
- **주요 기능**:
    - 입력 폼 사용자ver: (차량 정보, SoC, 목표 SoC, 도착/출차 시간)
    - 입력 관리자ver: 
        1.충전소 전체 차량 스케줄(예약 목록)

        각 차량의 도착 시각, 출차(출발) 시각
        각 차량의 초기 SoC(배터리 잔량), 목표 SoC
        (차량별 충전기 할당 정보 등)
        
        2.충전소 에너지 자원 정보

        태양광 발전 예측 데이터 (24시간 시계열)
        ESS(배터리) 용량, 초기 SoC
        계약 전력(최대 사용 가능 전력)
        TOU(시간대별 요금제) 정보
        
        3.운영 정책/제약 조건

        최대 전력 제한
        ESS 충방전 정책
        (필요시) 우선순위, 예약 변경 가능 여부 등
    - AI 추천 충전 스케줄/예상 비용/기존 방식 비교 결과 표시
    - Baseline보다 AI가 비싸면 "기존 방식 안내"만 제공
    - (선택) 간단한 그래프/알림
    - 실제 충전기 제어/실시간 모니터링 등은 MVP 범위에서 제외